(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[145],{3479:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(5155),s=a(2115);function l(){let[e,t]=(0,s.useState)(0),[a,l]=(0,s.useState)(500),[i,c]=(0,s.useState)(null),r=async()=>{let e=await fetch("/api/wallet/balance");t((await e.json()).balance||0)};(0,s.useEffect)(()=>{r()},[]);let o=async()=>{c(null);let e=await fetch("/api/wallet/topup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:a})}),t=await e.json();if(!e.ok)return void c(t.error||"Missing keys. Provide STRIPE_SECRET_KEY in environment to enable payments.");c("Payment intent created. Complete payment client-side.")};return(0,n.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:"Tokens"}),(0,n.jsxs)("p",{children:["Balance: ",e]}),(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("input",{type:"number",value:a,onChange:e=>l(parseInt(e.target.value||"0")),className:"border rounded px-3 py-2"}),(0,n.jsx)("button",{className:"bg-black text-white px-4 py-2 rounded",onClick:o,children:"Buy Tokens"})]}),i&&(0,n.jsx)("p",{className:"text-sm",children:i})]})}},5589:(e,t,a)=>{Promise.resolve().then(a.bind(a,3479))}},e=>{e.O(0,[441,964,358],()=>e(e.s=5589)),_N_E=e.O()}]);